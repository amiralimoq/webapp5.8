<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant Admin Panel</title>
    
    <!-- Supabase & Fonts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
    
    <!-- Base Styles -->
    <link rel="stylesheet" href="menu.css">
    
    <style>
        /* --- General Tweaks --- */
        body { background-color: #E0E0E0; font-family: 'Poppins', sans-serif; }
        .content-section { display: none; }
        .content-section.active-section { display: block; }
        
        /* --- Pill Tabs & Dropdowns --- */
        .pill-tabs { 
            display: flex; gap: 10px; margin-bottom: 20px; 
            flex-wrap: wrap; align-items: center; 
        }
        
        .pill-tab { 
            padding: 8px 20px; border-radius: 50px; background: white; 
            color: #888; font-size: 13px; font-weight: 600; cursor: pointer; 
            transition: 0.3s; border: 1px solid #eee; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.02); 
            display: flex; align-items: center; gap: 5px;
        }
        .pill-tab:hover { transform: translateY(-2px); color: #555; }
        .pill-tab.active-tab { 
            background: #FF724C; color: white; border-color: #FF724C; 
            box-shadow: 0 5px 15px rgba(255, 114, 76, 0.3); 
        }

        /* Dropdown Logic for Pills */
        .pill-dropdown { position: relative; }
        .pill-menu { 
            display: none; position: absolute; top: 120%; left: 0; 
            background: white; border-radius: 12px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); 
            width: 160px; padding: 5px; z-index: 100; border: 1px solid #eee; 
            animation: fadeIn 0.2s ease;
        }
        .pill-menu.show { display: block; }
        .pill-option { 
            padding: 10px 15px; cursor: pointer; border-radius: 8px; 
            font-size: 13px; color: #555; transition: 0.2s; 
        }
        .pill-option:hover { background: #F8F9FD; color: #FF724C; }
        .pill-option.selected { font-weight: 700; color: #FF724C; background: #FFF0EB; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }

        /* --- Clean Table --- */
        .clean-table { 
            background: white; padding: 30px; border-radius: 24px; 
            box-shadow: 0 10px 40px rgba(0,0,0,0.03); 
        }
        .table-header { 
            display: flex; padding-bottom: 15px; border-bottom: 1px solid #eee; 
            margin-bottom: 15px; 
        }
        .header-item { font-weight: 700; font-size: 13px; color: #2A2A2A; }
        .table-row { 
            display: flex; padding: 15px 0; border-bottom: 1px solid #f9f9f9; 
            align-items: center; font-size: 14px; color: #555; 
        }
        .table-row:last-child { border-bottom: none; }

        /* --- Template Cards --- */
        .template-grid { 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
            gap: 20px; 
        }
        .template-card {
            background: white; border-radius: 20px; overflow: hidden; 
            border: 2px solid transparent; cursor: pointer; transition: 0.3s;
            position: relative;
        }
        .template-card:hover { transform: translateY(-5px); }
        .template-card.active-theme { 
            border-color: #FF724C; box-shadow: 0 10px 30px rgba(255, 114, 76, 0.2); 
        }
        .template-preview { 
            height: 120px; background: #eee; display: flex; 
            align-items: center; justify-content: center; font-size: 40px; color: #ccc; 
        }
        .template-info { padding: 15px; text-align: center; }
        .check-icon { 
            position: absolute; top: 10px; right: 10px; background: #FF724C; 
            color: white; border-radius: 50%; padding: 5px; display: none; 
        }
        .active-theme .check-icon { display: block; }

        /* --- Chips & Modal --- */
        .chip-dropdown { position: relative; display: inline-block; }
        .chip-btn { 
            background: #fff; border: 1px solid #eee; padding: 8px 16px; 
            border-radius: 20px; font-size: 13px; font-weight: 600; color: #555; 
            cursor: pointer; display: flex; align-items: center; gap: 8px; transition: 0.2s; 
        }
        .chip-menu { 
            display: none; position: absolute; top: 110%; left: 0; background: white; 
            border-radius: 12px; box-shadow: 0 5px 20px rgba(0,0,0,0.15); width: 200px; 
            padding: 10px; z-index: 100; border: 1px solid #eee; 
        }
        .chip-menu.show { display: block; }
        .chip-option { padding: 8px; cursor: pointer; border-radius: 8px; font-size: 13px; color: #555; }
        
        .wh-container { 
            background: white; padding: 25px; border-radius: 20px; 
            margin-top: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.03); 
        }
        
        .modal-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.5); display: none; justify-content: center; 
            align-items: center; z-index: 1000; 
        }
        .modal-content { 
            background: white; padding: 30px; border-radius: 24px; 
            width: 500px; max-height: 90vh; overflow-y: auto; position: relative; 
        }
        .form-control { 
            width: 100%; padding: 12px; border: 1px solid #eee; border-radius: 10px; 
            background: #fafafa; outline: none; margin-bottom: 15px; font-family: 'Poppins', sans-serif; 
        }
        .btn-add { 
            background: #FF724C; color: white; border: none; padding: 12px; 
            border-radius: 10px; width: 100%; cursor: pointer; font-weight: 600; 
            font-family: 'Poppins', sans-serif; transition: 0.2s; 
        }
        .btn-add:hover { background-color: #e05530; }
        .btn-outline { background: white; color: #555; border: 1px solid #ddd; margin-bottom: 10px; }
        
        .stats-grid { 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
            gap: 20px; margin-bottom: 30px; 
        }
        .stat-card { 
            background: white; padding: 20px; border-radius: 20px; 
            box-shadow: 0 10px 40px rgba(0,0,0,0.03); display: flex; 
            align-items: center; gap: 15px; 
        }
        .stat-icon { 
            width: 50px; height: 50px; border-radius: 12px; display: flex; 
            align-items: center; justify-content: center; font-size: 24px; 
        }

        /* Discount Specific Styles */
        .step-section { margin-bottom: 20px; padding: 15px; background: #f9f9f9; border-radius: 12px; }
        .step-title { font-weight: 600; margin-bottom: 12px; font-size: 14px; color: #333; }
        .radio-group { display: flex; gap: 20px; margin-bottom: 10px; }
        .radio-label { display: flex; align-items: center; gap: 8px; font-size: 14px; color: #555; cursor: pointer; font-weight: 500; }
        
        .filter-box { border: 1px solid #eee; padding: 10px; border-radius: 8px; background: white; margin-top: 10px; }
        .user-checkbox-list { max-height: 150px; overflow-y: auto; border: 1px solid #eee; border-radius: 8px; padding: 5px; margin-top: 10px; background: white; }
        .user-checkbox-item { display: flex; align-items: center; padding: 8px; font-size: 12px; border-bottom: 1px solid #f5f5f5; }
        
        .date-input-group { display: flex; gap: 15px; margin-top: 10px; }
        .date-field { flex: 1; }
        .date-field label { display: block; font-size: 12px; color: #888; margin-bottom: 5px; font-weight: 600; }
        .date-field input { background: white; border: 1px solid #ddd; }
        
        .badge-status { 
            padding: 4px 10px; border-radius: 6px; font-size: 11px; 
            font-weight: 600; transition:0.2s; 
            /* Cursor default as requested */
            cursor: default; 
        }
        .status-active { background: #E9FBF0; color: #2ECC71; }
        .status-inactive { background: #FFF0F0; color: #FF7675; }

        /* REPORT CIRCLES */
        .report-grid { display: flex; justify-content: center; gap: 30px; margin-bottom: 20px; }
        .report-item { display: flex; flex-direction: column; align-items: center; }
        .report-circle { 
            width: 100px; height: 100px; border-radius: 50%; 
            background: conic-gradient(#FF724C 0% 0%, #eee 0% 100%); 
            display: flex; align-items: center; justify-content: center; position: relative; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .report-circle::after { content: ''; position: absolute; width: 80%; height: 80%; background: white; border-radius: 50%; }
        .report-val { position: absolute; z-index: 2; font-weight: 700; font-size: 16px; color: #333; }
        .report-label { margin-top: 10px; font-size: 12px; font-weight: 600; color: #888; }
        .report-subval { margin-top: 2px; font-size: 11px; color: #FF724C; font-weight: 600; }

        .report-info-row { display: flex; justify-content: space-between; border-bottom: 1px solid #eee; padding: 10px 0; font-size: 13px; }
        .report-info-row:last-child { border: none; }
        
        .modal-close-icon {
            position: absolute; top: 20px; right: 20px; font-size: 24px; color: #aaa; cursor: pointer; transition: 0.2s; z-index: 10;
        }
        .modal-close-icon:hover { color: #FF724C; }

        /* BEAUTIFUL FILTER BAR */
        .filter-bar { 
            display: flex; flex-wrap: wrap; gap: 20px; align-items: flex-end; 
            margin-bottom: 25px; padding: 20px; border-bottom: 1px solid #f0f0f0; 
            background: #F8F9FD; border-radius: 16px;
        }
        .filter-group { display: flex; flex-direction: column; gap: 8px; }
        .filter-label { font-size: 12px; color: #888; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
        
        .input-styled-wrapper {
            position: relative; background: white; border: 1px solid #eee; 
            border-radius: 12px; padding: 0 12px; height: 45px; 
            display: flex; align-items: center; gap: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.02); transition: 0.2s;
        }
        .input-styled-wrapper:focus-within { border-color: #FF724C; box-shadow: 0 5px 15px rgba(255, 114, 76, 0.1); }
        .input-styled-wrapper i { color: #FF724C; font-size: 18px; }
        
        .input-styled { 
            border: none; outline: none; background: transparent; 
            font-size: 13px; color: #333; width: 130px; font-family: 'Poppins', sans-serif;
        }
        .select-styled {
            border: none; outline: none; background: transparent;
            font-size: 13px; color: #333; font-weight: 600; cursor: pointer;
        }

        /* Buttons */
        .btn-clear {
            background: white; border: 1px solid #eee; color: #888;
            height: 45px; padding: 0 20px; border-radius: 12px;
            cursor: pointer; font-size: 13px; font-weight: 500;
            display: flex; align-items: center; gap: 8px; transition: 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.02);
        }
        .btn-clear:hover { color: #FF7675; border-color: #FF7675; background: #FFF0F0; }

        .btn-apply {
            background: #FF724C; color: white; border: none;
            height: 45px; padding: 0 25px; border-radius: 12px;
            cursor: pointer; font-size: 13px; font-weight: 600;
            display: flex; align-items: center; gap: 8px;
            box-shadow: 0 5px 15px rgba(255, 114, 76, 0.3); transition: 0.2s;
        }
        .btn-apply:hover { background: #e05530; transform: translateY(-2px); }

        /* Responsive Fixes */
        @media (max-width: 768px) {
            .dashboard-container { flex-direction: column; height: auto; border-radius: 0; overflow: visible; }
            .sidebar { position: fixed; top: 0; left: -100%; width: 260px; height: 100vh; z-index: 1000; transition: 0.3s ease; box-shadow: 5px 0 15px rgba(0,0,0,0.1); }
            .sidebar.active { left: 0; }
            .sidebar-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 999; display: none; }
            .sidebar-overlay.active { display: block; }
            .main-content { padding: 20px; width: 100%; }
            .header { gap: 15px; }
            .mobile-menu-btn { display: block !important; font-size: 24px; cursor: pointer; color: #2A2A2A; margin-right: 10px; }
            .search-bar { display: none; }
            .stats-grid { grid-template-columns: 1fr; }
            .wh-container .chip-dropdown, .wh-container button { width: 100%; margin-bottom: 10px; }
            .wh-container .chip-btn { justify-content: space-between; }
            .pill-tabs { overflow-x: auto; padding-bottom: 5px; flex-wrap: nowrap; }
            .pill-tab { white-space: nowrap; }
            .clean-table { padding: 15px; overflow-x: auto; }
            .table-header, .table-row { min-width: 600px; }
            .modal-content { width: 90%; margin: 0 5%; }
            .date-input-group { flex-direction: column; gap: 10px; }
            .filter-bar { flex-direction: column; align-items: flex-start; }
            .filter-group, .input-styled-wrapper { width: 100%; }
            .input-styled { width: 100%; }
        }
        .mobile-menu-btn { display: none; }
    </style>
</head>
<body>

    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">Admin<span>Panel</span></div>
            <ul class="menu-list">
                <li class="menu-item active" data-target="dashboard"><i class="ri-dashboard-line"></i> Dashboard</li>
                <li class="menu-item" data-target="customers"><i class="ri-user-heart-line"></i> Customers</li>
                <li class="menu-item" data-target="discounts"><i class="ri-ticket-line"></i> Discounts</li>
                <li class="menu-item" data-target="sales"><i class="ri-bar-chart-grouped-line"></i> Sales</li>
                <li class="menu-item" data-target="users"><i class="ri-group-line"></i> Users Management</li>
                <li class="menu-item" data-target="templates"><i class="ri-palette-line"></i> Templates</li>
                <li class="menu-item" data-target="reviews"><i class="ri-star-smile-line"></i> Reviews</li>
                <li class="menu-item" data-target="messages"><i class="ri-mail-line"></i> Messages</li>
                <li class="menu-item logout"><i class="ri-logout-box-r-line"></i> Logout</li>
            </ul>
        </aside>

        <main class="main-content">
            <header class="header">
                <div class="mobile-menu-btn" onclick="toggleSidebar()"><i class="ri-menu-2-line"></i></div>
                <div class="search-bar" style="opacity: 0;"></div>
                <div class="user-profile" id="profile-trigger" style="cursor: pointer;">
                    <span id="header-username">Admin Manager</span>
                    <div class="user-img" style="background-image: url('https://i.pravatar.cc/150?img=12');"></div>
                </div>
            </header>
            
            <div class="sidebar-overlay" onclick="toggleSidebar()"></div>

            <!-- DASHBOARD SECTION -->
            <div id="dashboard" class="content-section active-section">
                <h3 id="dashboard-date-title" style="margin-bottom: 20px; color: #2A2A2A; font-size: 18px;">...</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #E9FBF0; color: #2ECC71;"><i class="ri-shopping-basket-2-line"></i></div>
                        <div>
                            <div style="color: #888; font-size: 12px;">Total Orders (Month)</div>
                            <h3 id="month-orders">...</h3>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #FFF0EB; color: #FF724C;"><i class="ri-money-dollar-circle-line"></i></div>
                        <div>
                            <div style="color: #888; font-size: 12px;">Revenue (Month)</div>
                            <h3 id="month-revenue">...</h3>
                        </div>
                    </div>
                </div>
                
                <div class="wh-container">
                    <div style="font-size: 16px; font-weight: 600; margin-bottom: 15px;"><i class="ri-time-line"></i> Working Hours Settings</div>
                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                        <div class="chip-dropdown" id="chip-start-time">
                            <button class="chip-btn" onclick="toggleChip('start-time')">Start: <span class="val">08:00</span> <i class="ri-arrow-down-s-line"></i></button>
                            <div class="chip-menu" id="menu-start-time"></div>
                        </div>
                        <div class="chip-dropdown" id="chip-end-time">
                            <button class="chip-btn" onclick="toggleChip('end-time')">End: <span class="val">23:00</span> <i class="ri-arrow-down-s-line"></i></button>
                            <div class="chip-menu" id="menu-end-time"></div>
                        </div>
                        <div class="chip-dropdown" id="chip-start-day">
                            <button class="chip-btn" onclick="toggleChip('start-day')">From: <span class="val">Monday</span> <i class="ri-arrow-down-s-line"></i></button>
                            <div class="chip-menu" id="menu-start-day"></div>
                        </div>
                        <div class="chip-dropdown" id="chip-end-day">
                            <button class="chip-btn" onclick="toggleChip('end-day')">To: <span class="val">Sunday</span> <i class="ri-arrow-down-s-line"></i></button>
                            <div class="chip-menu" id="menu-end-day"></div>
                        </div>
                        <button id="save-wh-btn" class="btn-add" style="width: auto; padding: 8px 20px; border-radius: 20px; font-size: 13px;">Save</button>
                    </div>
                </div>
            </div>

            <!-- CUSTOMERS SECTION -->
            <div id="customers" class="content-section">
                <div style="margin-bottom: 20px; font-weight: 600; font-size: 18px;"><i class="ri-user-heart-line"></i> Customers</div>
                <div class="pill-tabs">
                    <div class="pill-tab active-tab" onclick="switchCustomerTab('all', this)">All Customers</div>
                    <div class="pill-tab" onclick="switchCustomerTab('loyal', this)">Loyal (>3 Orders)</div>
                    <div class="pill-tab" onclick="switchCustomerTab('valuable', this)">Most Valuable (1 Yr)</div>
                    <div class="pill-tab" onclick="switchCustomerTab('interests', this)">Interests</div>
                </div>
                <div class="clean-table">
                    <div class="table-header" id="customer-header"></div>
                    <div id="customer-list"></div>
                </div>
            </div>

            <!-- DISCOUNTS SECTION (UPDATED) -->
            <div id="discounts" class="content-section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <div style="font-weight: 600; font-size: 18px;"><i class="ri-ticket-line"></i> Discounts Management</div>
                    <button class="btn-add" style="width: auto; padding: 10px 25px;" onclick="openDiscountModal()">
                        <i class="ri-add-line"></i> Create Discount
                    </button>
                </div>

                <!-- DROPDOWN PILLS FOR FILTERS -->
                <div class="pill-tabs" id="discount-filters-container">
                    <!-- Reset Button -->
                    <div class="pill-tab active-tab" onclick="resetAllDiscountFilters(this)" id="btn-all-discounts">
                        <i class="ri-apps-line"></i> All
                    </div>

                    <!-- Status Dropdown -->
                    <div class="pill-dropdown" id="dd-status">
                        <div class="pill-tab" onclick="togglePillMenu('status')">
                            <span id="label-status">Status: All</span> <i class="ri-arrow-down-s-line"></i>
                        </div>
                        <div class="pill-menu" id="menu-status">
                            <div class="pill-option selected" onclick="setDiscountFilter('status', 'all', 'All')">All</div>
                            <div class="pill-option" onclick="setDiscountFilter('status', 'active', 'Active')">Active</div>
                            <div class="pill-option" onclick="setDiscountFilter('status', 'inactive', 'Inactive')">Inactive</div>
                            <div class="pill-option" onclick="setDiscountFilter('status', 'expired', 'Expired')">Expired</div>
                        </div>
                    </div>

                    <!-- Usage Dropdown -->
                    <div class="pill-dropdown" id="dd-usage">
                        <div class="pill-tab" onclick="togglePillMenu('usage')">
                            <span id="label-usage">Usage: All</span> <i class="ri-arrow-down-s-line"></i>
                        </div>
                        <div class="pill-menu" id="menu-usage">
                            <div class="pill-option selected" onclick="setDiscountFilter('usage', 'all', 'All')">All</div>
                            <div class="pill-option" onclick="setDiscountFilter('usage', 'single', 'Single Use')">Single Use</div>
                            <div class="pill-option" onclick="setDiscountFilter('usage', 'multi', 'Multi Use')">Multi Use</div>
                        </div>
                    </div>

                    <!-- Type Dropdown (Renamed from Scope) -->
                    <div class="pill-dropdown" id="dd-scope">
                        <div class="pill-tab" onclick="togglePillMenu('scope')">
                            <span id="label-scope">Type: All</span> <i class="ri-arrow-down-s-line"></i>
                        </div>
                        <div class="pill-menu" id="menu-scope">
                            <div class="pill-option selected" onclick="setDiscountFilter('scope', 'all', 'All')">All</div>
                            <div class="pill-option" onclick="setDiscountFilter('scope', 'public', 'Public')">Public</div>
                            <div class="pill-option" onclick="setDiscountFilter('scope', 'private', 'Private')">Private</div>
                        </div>
                    </div>
                </div>

                <div class="clean-table">
                    <!-- FILTER BAR -->
                    <div class="filter-bar">
                        <div class="filter-group">
                            <span class="filter-label">Date Range</span>
                            <div style="display:flex; gap:10px;">
                                <div class="input-styled-wrapper">
                                    <i class="ri-calendar-line"></i>
                                    <input type="text" onfocus="(this.type='date')" onblur="(this.type='text')" id="filter-date-start" class="input-styled" placeholder="From Date">
                                </div>
                                <div class="input-styled-wrapper">
                                    <i class="ri-arrow-right-line" style="font-size:14px; color:#ccc;"></i>
                                    <input type="text" onfocus="(this.type='date')" onblur="(this.type='text')" id="filter-date-end" class="input-styled" placeholder="To Date">
                                </div>
                            </div>
                        </div>
                        
                        <div class="filter-group">
                            <span class="filter-label">Amount Filter</span>
                            <div class="input-styled-wrapper">
                                <i class="ri-money-dollar-circle-line"></i>
                                <select id="filter-amount-op" class="select-styled">
                                    <option value="gt">More than</option>
                                    <option value="lt">Less than</option>
                                </select>
                                <input type="number" id="filter-amount" class="input-styled" placeholder="Price..." style="width:80px;">
                            </div>
                        </div>

                        <div style="display: flex; gap: 10px; margin-left: auto;">
                            <button class="btn-clear" onclick="resetAdvancedFilters()">
                                <i class="ri-close-circle-line"></i> Clear Filters
                            </button>
                            <button class="btn-apply" onclick="applyAdvancedFilters()">
                                Apply <i class="ri-arrow-right-line"></i>
                            </button>
                        </div>
                    </div>

                    <div class="table-header">
                        <span class="header-item" style="flex:2">Code Name</span>
                        <span class="header-item" style="flex:1">Type</span>
                        <span class="header-item" style="flex:1">Usage Mode</span>
                        <span class="header-item" style="flex:1">Min Order</span>
                        <span class="header-item" style="flex:1">Status</span>
                        <span class="header-item" style="flex:1; text-align: right;">Actions</span>
                    </div>
                    <div id="discount-list">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>

            <!-- SALES SECTION -->
            <div id="sales" class="content-section">
                <div style="margin-bottom: 20px; font-weight: 600; font-size: 18px;">Sales Analytics</div>
                <div class="pill-tabs">
                    <div class="pill-tab active-tab" onclick="switchSalesMode('cash', this)">Cash Report</div>
                    <div class="pill-tab" onclick="switchSalesMode('product', this)">Product Report</div>
                </div>
                <div id="sales-cash-view">
                    <div class="pill-tabs" style="transform: scale(0.9); transform-origin: left; margin-bottom: 10px;">
                        <div class="pill-tab" onclick="quickReport(1)">1 Day</div>
                        <div class="pill-tab" onclick="quickReport(7)">7 Days</div>
                        <div class="pill-tab" onclick="quickReport(30)">1 Month</div>
                        <div class="pill-tab" onclick="quickReport(365)">1 Year</div>
                    </div>
                    <div class="clean-table">
                        <div style="color: #888;">Total Revenue</div>
                        <h2 id="report-revenue" style="color: #2A2A2A; margin-top: 5px;">$0</h2>
                    </div>
                </div>
                <div id="sales-product-view" style="display: none;">
                    <div class="chip-dropdown" id="chip-prod-range" style="margin-bottom: 20px;">
                        <button class="chip-btn" onclick="toggleChip('prod-range')"><i class="ri-calendar-event-line"></i> <span class="val">Last 7 Days</span> <i class="ri-arrow-down-s-line"></i></button>
                        <div class="chip-menu" id="menu-prod-range">
                            <div class="chip-option" onclick="setProductFilter(1, 'Today')">Today</div>
                            <div class="chip-option" onclick="setProductFilter(7, 'Last 7 Days')">Last 7 Days</div>
                            <div class="chip-option" onclick="setProductFilter(30, 'Last Month')">Last Month</div>
                            <div class="chip-option" onclick="setProductFilter('Spring', 'Spring')">Spring</div>
                            <div class="chip-option" onclick="setProductFilter('Summer', 'Summer')">Summer</div>
                            <div class="chip-option" onclick="setProductFilter('Autumn', 'Autumn')">Autumn</div>
                            <div class="chip-option" onclick="setProductFilter('Winter', 'Winter')">Winter</div>
                        </div>
                    </div>
                    <div class="clean-table">
                        <div class="table-header">
                            <span class="header-item" style="flex:2">Product Name</span>
                            <span class="header-item" style="flex:1">Qty Sold</span>
                            <span class="header-item" style="flex:1; text-align:right;">Total Sales</span>
                        </div>
                        <div id="product-list"></div>
                    </div>
                </div>
            </div>

            <!-- USERS SECTION -->
            <div id="users" class="content-section">
                <div style="margin-bottom: 20px; font-weight: 600; font-size: 18px;">Users Management</div>
                <div class="pill-tabs">
                    <div class="pill-tab active-tab" onclick="switchUserTab('staff', this)">Staff</div>
                    <div class="pill-tab" onclick="switchUserTab('admin', this)">Admins</div>
                </div>
                
                <div id="user-tab-staff">
                    <div class="clean-table" style="margin-bottom: 30px;">
                        <h5 style="margin-bottom: 15px;">Create New Staff</h5>
                        <input type="text" id="new-user" class="form-control" placeholder="New Staff Username">
                        <input type="text" id="new-pass" class="form-control" placeholder="Password">
                        <button class="btn-add" id="create-btn">Create Staff</button>
                    </div>
                    <div class="clean-table">
                        <h5 style="margin-bottom: 15px;">Active Staff List</h5>
                        <div id="staff-list-container"></div>
                    </div>
                </div>
                
                <div id="user-tab-admin" style="display: none;">
                    <div class="clean-table" style="margin-bottom: 30px;">
                        <h5 style="margin-bottom: 15px;">Create New Admin</h5>
                        <input type="text" id="admin-user" class="form-control" placeholder="Letters & Numbers">
                        <input type="text" id="admin-pass" class="form-control" placeholder="Letters & Numbers (Numbers optional)">
                        <button class="btn-add" id="create-admin-btn">Create Admin</button>
                    </div>
                    <div class="clean-table">
                        <h5 style="margin-bottom: 15px;">Admins List</h5>
                        <div id="admin-list-container"></div>
                    </div>
                </div>
            </div>

            <!-- TEMPLATES SECTION -->
            <div id="templates" class="content-section">
                <div style="margin-bottom: 20px; font-weight: 600; font-size: 18px;">Menu Templates</div>
                <div class="template-grid">
                    <div class="template-card" onclick="setTheme('default', this)">
                        <div class="check-icon"><i class="ri-check-line"></i></div>
                        <div class="template-preview" style="background:#fff;">ðŸŽ¨</div>
                        <div class="template-info">
                            <strong>Classic Light</strong>
                            <p style="font-size:12px; color:#888;">Standard Orange & White</p>
                        </div>
                    </div>
                    <div class="template-card" onclick="setTheme('dark', this)">
                        <div class="check-icon"><i class="ri-check-line"></i></div>
                        <div class="template-preview" style="background:#2A2A2A;">ðŸŒ‘</div>
                        <div class="template-info">
                            <strong>Midnight Dark</strong>
                            <p style="font-size:12px; color:#888;">Elegant Dark Mode</p>
                        </div>
                    </div>
                    <div class="template-card" onclick="setTheme('ocean', this)">
                        <div class="check-icon"><i class="ri-check-line"></i></div>
                        <div class="template-preview" style="background:#E3F2FD;">ðŸŒŠ</div>
                        <div class="template-info">
                            <strong>Ocean Blue</strong>
                            <p style="font-size:12px; color:#888;">Fresh Blue & White</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- REVIEWS SECTION -->
            <div id="reviews" class="content-section">
                <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
                    <div style="font-weight: 600; font-size: 18px;">Customer Reviews</div>
                    <div style="display: flex; gap: 10px;">
                        <button class="chip-btn" id="notif-btn" onclick="toggleNotifSetting()">Notif: <span id="notif-state">OFF</span></button>
                        <button class="chip-btn" id="sound-btn" onclick="toggleSoundSetting()" style="display:none;">Sound: <span id="sound-state">ON</span></button>
                    </div>
                </div>
                <div id="reviews-container"></div>
            </div>

            <!-- MESSAGES SECTION -->
            <div id="messages" class="content-section">
                <div class="clean-table" id="messages-container"></div>
            </div>
        </main>
    </div>

    <!-- PROFILE MODAL -->
    <div class="modal-overlay" id="profile-modal">
        <div class="modal-content">
            <h3>Edit Profile</h3><br>
            <input type="text" id="edit-self-user" class="form-control" placeholder="New Username">
            <input type="text" id="edit-self-pass" class="form-control" placeholder="New Password">
            <div style="display: flex; gap: 10px;">
                <button class="btn-add" id="save-profile-btn">Save</button>
                <button class="btn-add" style="background:#eee; color:#333;" onclick="document.getElementById('profile-modal').style.display='none'">Cancel</button>
            </div>
        </div>
    </div>
    
    <!-- DISCOUNT REPORT MODAL -->
    <div class="modal-overlay" id="discount-report-modal">
        <div class="modal-content">
            <i class="ri-close-line modal-close-icon" onclick="closeReportModal()"></i>
            <h3 style="margin-bottom: 20px;">Usage Report</h3>
            <div id="report-content" style="text-align: center;">
                <!-- Filled by JS -->
            </div>
        </div>
    </div>

    <!-- DISCOUNT CREATION/EDIT MODAL -->
    <div class="modal-overlay" id="discount-modal">
        <div class="modal-content">
            <i class="ri-close-line modal-close-icon" onclick="document.getElementById('discount-modal').style.display='none'"></i>
            <h3 id="modal-title" style="margin-bottom: 20px;">Create Discount Code</h3>
            
            <!-- Step 1: Percentage (NEW) -->
            <div class="step-section">
                <div class="step-title">1. Discount Percentage (%)</div>
                <input type="number" id="disc-percent" class="form-control" placeholder="e.g. 15" style="margin-bottom:5px;">
            </div>

            <!-- Step 2: Code Name -->
            <div class="step-section">
                <div class="step-title">2. Discount Code Name</div>
                <input type="text" id="disc-code-name" class="form-control" placeholder="SUMMER2024" style="margin-bottom:5px;">
            </div>

            <!-- Step 3: Discount Scope -->
            <div class="step-section">
                <div class="step-title">3. Discount Type (Scope)</div>
                <div class="radio-group">
                    <label class="radio-label"><input type="radio" name="disc-scope" value="public" checked onchange="toggleDiscScope()"> Public (Everyone)</label>
                    <label class="radio-label"><input type="radio" name="disc-scope" value="private" onchange="toggleDiscScope()"> Private (Specific Users)</label>
                </div>
                
                <div id="private-filters" style="display: none;" class="filter-box">
                    <p style="font-size:12px; color:#888; margin-bottom:10px;">Filter Customers:</p>
                    <select id="disc-filter-type" class="form-control" onchange="updateFilterInputs()" style="padding:8px; font-size:13px;">
                        <option value="none">-- Select Filter --</option>
                        <option value="inactive">Inactive > 1 Month</option>
                        <option value="name">Specific Name</option>
                        <option value="phone_start">Phone (First 4 digits)</option>
                        <option value="phone_end">Phone (Last 3 digits)</option>
                        <option value="spender">High Spender (Min Order)</option>
                    </select>
                    <div id="filter-input-container" style="display:none; margin-bottom:10px;">
                        <input type="text" id="disc-filter-val" class="form-control" placeholder="Enter value..." style="margin:0; padding:8px;">
                    </div>
                    <button class="btn-add" style="padding:8px; font-size:12px; width:100%;" onclick="applyDiscountFilter()">Apply Filter & Find Users</button>
                    <div id="target-users-list" class="user-checkbox-list">
                        <div style="text-align:center; color:#aaa; font-size:12px;">Select a filter to find users</div>
                    </div>
                </div>
            </div>

            <!-- Step 4: Usage Limits -->
            <div class="step-section">
                <div class="step-title">4. Usage Type</div>
                <div class="radio-group">
                    <label class="radio-label"><input type="radio" name="disc-usage" value="single" checked onchange="toggleUsageInput()"> Single Use</label>
                    <label class="radio-label"><input type="radio" name="disc-usage" value="multi" onchange="toggleUsageInput()"> Multi Use</label>
                </div>
                <input type="number" id="disc-usage-limit" class="form-control" placeholder="Max usage count per user" style="display:none; margin-top:10px;">
            </div>

            <!-- Step 5: Duration -->
            <div class="step-section">
                <div class="step-title">5. Duration & Limits</div>
                <div class="radio-group">
                    <label class="radio-label"><input type="radio" name="disc-time" value="daily" checked onchange="toggleTimeInputs()"> Daily (Unlimited)</label>
                    <label class="radio-label"><input type="radio" name="disc-time" value="hourly" onchange="toggleTimeInputs()"> Hourly (Precise Time)</label>
                </div>

                <div id="time-daily" style="margin-top:10px;">
                    <div class="date-input-group">
                        <div class="date-field">
                            <label>Start Date</label>
                            <input type="date" id="disc-start-date" class="form-control">
                        </div>
                        <div class="date-field">
                            <label>End Date</label>
                            <input type="date" id="disc-end-date" class="form-control">
                        </div>
                    </div>
                </div>

                <div id="time-hourly" style="margin-top:10px; display:none;">
                    <div class="date-input-group">
                        <div class="date-field">
                            <label>Start Date</label>
                            <input type="date" id="disc-hourly-start-date" class="form-control">
                        </div>
                        <div class="date-field">
                            <label>Start Time</label>
                            <input type="time" id="disc-start-time" class="form-control">
                        </div>
                    </div>
                    <div class="date-input-group" style="margin-top:10px;">
                        <div class="date-field">
                            <label>End Date</label>
                            <input type="date" id="disc-hourly-end-date" class="form-control">
                        </div>
                        <div class="date-field">
                            <label>End Time</label>
                            <input type="time" id="disc-end-time" class="form-control">
                        </div>
                    </div>
                </div>

                <div style="margin-top:15px;">
                    <label style="font-size:12px; color:#888; margin-bottom: 5px; font-weight: 600; display:block;">Min Order Amount ($):</label>
                    <input type="number" id="disc-min-order" class="form-control" placeholder="0" value="0">
                </div>
            </div>

            <!-- Step 6: Status (Moved Here) -->
            <div class="step-section" id="status-section">
                <div class="step-title">6. Status</div>
                <div class="radio-group">
                    <label class="radio-label"><input type="radio" name="disc-status" value="active" checked> Active</label>
                    <label class="radio-label"><input type="radio" name="disc-status" value="inactive"> Inactive</label>
                </div>
            </div>

            <div style="display: flex; gap: 10px;">
                <button class="btn-add" id="save-disc-btn" onclick="saveDiscount()">Create Discount</button>
            </div>
        </div>
    </div>

    <audio id="notif-sound" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"></audio>

    <script src="admin.js"></script>
</body>
</html>
